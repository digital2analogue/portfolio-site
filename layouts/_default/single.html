{{ define "main" }}
<!-- USING PROJECT single.html OVERRIDE -->

{{/* STARTDate visibility logic */}}
{{ $showDates := true }}
{{ if eq .Section "projects" }}
  {{ $showDates = site.Params.showDatesProjects | default false }}
{{ else if eq .Section "posts" }}
  {{ $showDates = site.Params.showDatesPosts | default true }}
{{ else }}
  {{ $showDates = site.Params.showDates | default true }}
{{ end }}
{{ with .Params.showDate }}{{ $showDates = . }}{{ end }}

{{ $dateMachine := .Date | time.Format "2006-01-02T15:04:05-07:00" }}
{{ $dateHuman := .Date | time.Format ":date_long" }}


{{/* END Date visibility logic */}}

<article class="post-article">
  <header class="post-header">
    <h1 class="post-title">{{ .Title }}</h1>
    <div class="post-meta">
    {{ if $showDates }}
    <time datetime="{{ $dateMachine }}">{{ $dateHuman }}</time>
    <span class="post-meta-separator">•</span>
    {{ end }}
      <span>{{.ReadingTime}} min read</span>
      {{ if .Params.categories }}
      <span class="post-meta-separator">•</span>
      {{ partial "terms.html" (dict "taxonomy" "categories" "page" .) }}
      {{ end }}
      {{ if .Params.tags }}
      <span class="post-meta-separator">•</span>
      {{ partial "terms.html" (dict "taxonomy" "tags" "page" .) }}
      {{ end }}
    </div>
    {{ if .Summary }}
    <p class="post-summary">{{.Summary}}</p>
    {{ end }}
  </header>

  {{ if .Params.main_image }}
  <div class="post-image">
    <img src="{{ .Params.main_image }}" alt="{{ .Title }}">
  </div>
  {{ end }}

  <div class="post-content">
    {{ .Content }}
  </div>

  {{ partial "giscus.html" . }}
</article>

{{ end }}
